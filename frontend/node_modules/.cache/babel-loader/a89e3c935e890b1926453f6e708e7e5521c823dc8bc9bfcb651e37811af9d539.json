{"ast":null,"code":"import React,{forwardRef,useEffect,useImperativeHandle,useRef,useState}from\"react\";import{createPortal}from\"react-dom\";import LoadingSpinner from\"../../shared/components/loader/LoadingSpinner\";import classes from\"./DetailsModal.module.css\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const DetailsModal=/*#__PURE__*/forwardRef((_ref,ref)=>{let{movieid,type}=_ref;const dialog=useRef();const iframeRef=useRef();useImperativeHandle(ref,()=>{return{open(){if(dialog.current){dialog.current.showModal();}else{console.error(\"Dialog element is not yet attached to the DOM.\");}},close(){if(dialog.current)dialog.current.close();}};});const[details,setDetails]=useState({});const[loader,setLoader]=useState(true);const getDetails=()=>{fetch(`https://api.themoviedb.org/3/${type}/${movieid}?append_to_response=videos&api_key=${process.env.REACT_APP_API_KEY}`).then(res=>res.json()).then(json=>setDetails(json));setLoader(false);};useEffect(()=>{if(movieid&&type){getDetails();}},[movieid,type]);var genreNames=\"\";var video={};if(Object.keys(details).length>0&&Object.keys(details.genres).length>0&&Object.keys(details.videos).length>0&&Object.keys(details.videos.results).length>0){var genres=details.genres;genreNames=genres.map(genre=>genre.name).join(\", \");video=details.videos.results.filter(data=>(data.type===\"Trailer\"||data.type===\"Teaser\")&&data.site===\"YouTube\")[0];}const closeModal=event=>{if(iframeRef.current){iframeRef.current.contentWindow.postMessage('{\"event\":\"command\",\"func\":\"pauseVideo\",\"args\":\"\"}',\"*\");}ref.current.close();};return/*#__PURE__*/createPortal(/*#__PURE__*/_jsx(\"dialog\",{ref:dialog,className:classes.infoModal,children:loader&&movieid&&type?/*#__PURE__*/_jsx(LoadingSpinner,{}):/*#__PURE__*/_jsxs(_Fragment,{children:[video&&Object.keys(video).length>0?/*#__PURE__*/_jsx(\"div\",{style:{width:\"100%\",display:\"flex\",justifyContent:\"center\"},children:/*#__PURE__*/_jsx(\"iframe\",{ref:iframeRef,width:\"370\",height:\"290\",style:{paddingBottom:\"30px\"},src:`https://www.youtube.com/embed/${video.key}?enablejsapi=1`,title:video.name,frameBorder:\"0\",allow:\"accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\",referrerPolicy:\"strict-origin-when-cross-origin\",allowFullScreen:true})}):/*#__PURE__*/_jsx(\"div\",{style:{width:\"100%\",display:\"flex\",justifyContent:\"center\"},children:/*#__PURE__*/_jsx(\"img\",{src:\"./this-video-is-unavailable.jpg\",alt:\"video-is-unavailable\",style:{width:\"370\",height:\"290\",paddingBottom:\"30px\"}})}),/*#__PURE__*/_jsxs(\"h2\",{children:[\" \",type===\"movie\"?details[\"title\"]:details[\"name\"],\" \"]}),/*#__PURE__*/_jsx(\"h4\",{children:\"Overview\"}),/*#__PURE__*/_jsx(\"p\",{children:details.overview}),/*#__PURE__*/_jsx(\"h4\",{children:\"Genre(s)\"}),/*#__PURE__*/_jsx(\"p\",{children:genreNames}),/*#__PURE__*/_jsx(\"form\",{method:\"dialog\",children:/*#__PURE__*/_jsx(\"button\",{onClick:closeModal,children:\"Close\"})})]})}),document.getElementById(\"modal\"));});export default DetailsModal;","map":{"version":3,"names":["React","forwardRef","useEffect","useImperativeHandle","useRef","useState","createPortal","LoadingSpinner","classes","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","DetailsModal","_ref","ref","movieid","type","dialog","iframeRef","open","current","showModal","console","error","close","details","setDetails","loader","setLoader","getDetails","fetch","process","env","REACT_APP_API_KEY","then","res","json","genreNames","video","Object","keys","length","genres","videos","results","map","genre","name","join","filter","data","site","closeModal","event","contentWindow","postMessage","className","infoModal","children","style","width","display","justifyContent","height","paddingBottom","src","key","title","frameBorder","allow","referrerPolicy","allowFullScreen","alt","overview","method","onClick","document","getElementById"],"sources":["C:/Users/dasru/Documents/DVDStore_dev/frontend/src/home/components/DetailsModal.js"],"sourcesContent":["import React, {\r\n  forwardRef,\r\n  useEffect,\r\n  useImperativeHandle,\r\n  useRef,\r\n  useState,\r\n} from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\n\r\nimport LoadingSpinner from \"../../shared/components/loader/LoadingSpinner\";\r\nimport classes from \"./DetailsModal.module.css\";\r\n\r\nconst DetailsModal = forwardRef(({ movieid, type }, ref) => {\r\n  const dialog = useRef();\r\n  const iframeRef = useRef();\r\n\r\n  useImperativeHandle(ref, () => {\r\n    return {\r\n      open() {\r\n        if (dialog.current) {\r\n          dialog.current.showModal();\r\n        } else {\r\n          console.error(\"Dialog element is not yet attached to the DOM.\");\r\n        }\r\n      },\r\n      close() {\r\n        if (dialog.current) dialog.current.close();\r\n      },\r\n    };\r\n  });\r\n\r\n  const [details, setDetails] = useState({});\r\n  const [loader, setLoader] = useState(true);\r\n\r\n  const getDetails = () => {\r\n    fetch(\r\n      `https://api.themoviedb.org/3/${type}/${movieid}?append_to_response=videos&api_key=${process.env.REACT_APP_API_KEY}`\r\n    )\r\n      .then((res) => res.json())\r\n      .then((json) => setDetails(json));\r\n    setLoader(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (movieid && type) {\r\n      getDetails();\r\n    }\r\n  }, [movieid, type]);\r\n\r\n  var genreNames = \"\";\r\n  var video = {};\r\n  if (\r\n    Object.keys(details).length > 0 &&\r\n    Object.keys(details.genres).length > 0 &&\r\n    Object.keys(details.videos).length > 0 &&\r\n    Object.keys(details.videos.results).length > 0\r\n  ) {\r\n    var genres = details.genres;\r\n    genreNames = genres.map((genre) => genre.name).join(\", \");\r\n    video = details.videos.results.filter(\r\n      (data) =>\r\n        (data.type === \"Trailer\" || data.type === \"Teaser\") &&\r\n        data.site === \"YouTube\"\r\n    )[0];\r\n  }\r\n\r\n  const closeModal = (event) => {\r\n    if (iframeRef.current) {\r\n      iframeRef.current.contentWindow.postMessage(\r\n        '{\"event\":\"command\",\"func\":\"pauseVideo\",\"args\":\"\"}',\r\n        \"*\"\r\n      );\r\n    }\r\n    ref.current.close();\r\n  };\r\n\r\n  return createPortal(\r\n    <dialog ref={dialog} className={classes.infoModal}>\r\n      {loader && movieid && type ? (\r\n        <LoadingSpinner />\r\n      ) : (\r\n        <>\r\n          {video && Object.keys(video).length > 0 ? (\r\n            <div\r\n              style={{\r\n                width: \"100%\",\r\n                display: \"flex\",\r\n                justifyContent: \"center\",\r\n              }}\r\n            >\r\n              <iframe\r\n                ref={iframeRef}\r\n                width=\"370\"\r\n                height=\"290\"\r\n                style={{ paddingBottom: \"30px\" }}\r\n                src={`https://www.youtube.com/embed/${video.key}?enablejsapi=1`}\r\n                title={video.name}\r\n                frameBorder=\"0\"\r\n                allow=\"accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\"\r\n                referrerPolicy=\"strict-origin-when-cross-origin\"\r\n                allowFullScreen\r\n              ></iframe>\r\n            </div>\r\n          ) : (\r\n            <div\r\n              style={{\r\n                width: \"100%\",\r\n                display: \"flex\",\r\n                justifyContent: \"center\",\r\n              }}\r\n            >\r\n              <img\r\n                src=\"./this-video-is-unavailable.jpg\"\r\n                alt=\"video-is-unavailable\"\r\n                style={{ width: \"370\", height: \"290\", paddingBottom: \"30px\" }}\r\n              />\r\n            </div>\r\n          )}\r\n\r\n          <h2> {type === \"movie\" ? details[\"title\"] : details[\"name\"]} </h2>\r\n          <h4>Overview</h4>\r\n          <p>{details.overview}</p>\r\n          <h4>Genre(s)</h4>\r\n          <p>{genreNames}</p>\r\n\r\n          <form method=\"dialog\">\r\n            <button onClick={closeModal}>Close</button>\r\n          </form>\r\n        </>\r\n      )}\r\n    </dialog>,\r\n    document.getElementById(\"modal\")\r\n  );\r\n});\r\n\r\nexport default DetailsModal;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}