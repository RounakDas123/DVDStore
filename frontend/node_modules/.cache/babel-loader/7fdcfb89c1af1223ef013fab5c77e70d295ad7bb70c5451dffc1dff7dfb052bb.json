{"ast":null,"code":"import{motion}from\"framer-motion\";import React,{useEffect,useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{searchDetailsActions,searchOverlayActions}from\"../../../store\";import Carousel from\"../../../home/components/Carousel\";import classes from\"./SearchOverlay.module.css\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function SearchOverlay(){const dispatch=useDispatch();const showOverlay=useSelector(state=>state.searchOverlay.showSearchOverlay);const showSearchCarousel=useSelector(state=>state.searchDetails.showSearchDetails);const searchText=useSelector(state=>state.searchDetails.searchText);const[searchResults,setSearchResults]=useState({movieResults:[],tvResults:[]});const searchOverlayText=splitStringUsingRegex(\"Please press Enter!\");const charVariants={hidden:{opacity:0,y:10},// Add a slight translation for better visibility\nreveal:{opacity:1,y:0}};const containerVariants={hidden:{},reveal:{transition:{delayChildren:0,staggerChildren:0.25}}};function splitStringUsingRegex(inputstring){const characters=[];const regex=/[\\s\\S]/gu;let match;while((match=regex.exec(inputstring))!=null){characters.push(match[0]);}return characters;}function checkData(data){return data.poster_path!==null&&data.poster_path!==undefined&&data.poster_path!==\"\"&&data.title!==null&&data.title!==undefined&&data.title!==\"\"&&data.vote_average!==null&&data.vote_average!==undefined&&data.vote_average!==\"\"&&data.overview!==null&&data.overview!==undefined&&data.overview!==\"\";}function checkDataTv(data){return data.poster_path!==null&&data.poster_path!==undefined&&data.poster_path!==\"\"&&data.name!==null&&data.name!==undefined&&data.name!==\"\"&&data.vote_average!==null&&data.vote_average!==undefined&&data.vote_average!==\"\"&&data.overview!==null&&data.overview!==undefined&&data.overview!==\"\";}const getSearchResults=()=>{fetch(`https://api.themoviedb.org/3/search/movie?language=en-US&api_key=${process.env.REACT_APP_API_KEY}&query=${searchText}&with_original_language=en`).then(res=>res.json()).then(json=>setSearchResults(prevValues=>({...prevValues,[\"movieResults\"]:json.results.filter(checkData)})));fetch(`https://api.themoviedb.org/3/search/tv?language=en-US&api_key=${process.env.REACT_APP_API_KEY}&query=${searchText}&with_original_language=en`).then(res=>res.json()).then(json=>setSearchResults(prevValues=>({...prevValues,[\"tvResults\"]:json.results.filter(checkDataTv)})));};useEffect(()=>{getSearchResults();},[]);useEffect(()=>{if((searchText!==null||searchText!==undefined||searchText!==\"\")&&!showSearchCarousel){getSearchResults();}},[searchText,showSearchCarousel]);const closeOverlay=()=>{dispatch(searchOverlayActions.showOverlay(false));dispatch(searchDetailsActions.hideSearchCarousel());// Hide carousel\ndispatch(searchDetailsActions.fillSearchText(\"\"));// Clear input field\n};const totalResults=searchResults.movieResults.length+searchResults.tvResults.length;return/*#__PURE__*/_jsxs(\"div\",{className:`${classes.overlay} ${showOverlay?classes.active:\"\"}`,children:[/*#__PURE__*/_jsx(\"button\",{className:classes.closeButton,onClick:closeOverlay,children:\"\\u2715\"}),showSearchCarousel&&/*#__PURE__*/_jsx(motion.h1,{initial:\"hidden\",animate:\"reveal\",variants:containerVariants,className:classes[\"overlay-text\"],children:searchOverlayText.map((char,index)=>/*#__PURE__*/_jsx(motion.span,{transition:{duration:1.5},variants:charVariants,children:char},`${char}-${index}`))}),!showSearchCarousel&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h2\",{className:classes.resultsCount,children:[\"Search Results: Total \",totalResults,\" results found\"]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.scrollableContent,children:[searchResults.movieResults.length>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{className:classes.heading,style:{paddingLeft:\"12.5%\"},children:\"Movies\"}),/*#__PURE__*/_jsx(Carousel,{movieList:searchResults.movieResults,type:\"movie\"})]}),searchResults.tvResults.length>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{className:classes.heading,style:{paddingLeft:\"12.5%\"},children:\"Tv-Series\"}),/*#__PURE__*/_jsx(Carousel,{movieList:searchResults.tvResults,type:\"tv\"})]})]})]})]});}export default SearchOverlay;","map":{"version":3,"names":["motion","React","useEffect","useState","useDispatch","useSelector","searchDetailsActions","searchOverlayActions","Carousel","classes","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SearchOverlay","dispatch","showOverlay","state","searchOverlay","showSearchOverlay","showSearchCarousel","searchDetails","showSearchDetails","searchText","searchResults","setSearchResults","movieResults","tvResults","searchOverlayText","splitStringUsingRegex","charVariants","hidden","opacity","y","reveal","containerVariants","transition","delayChildren","staggerChildren","inputstring","characters","regex","match","exec","push","checkData","data","poster_path","undefined","title","vote_average","overview","checkDataTv","name","getSearchResults","fetch","process","env","REACT_APP_API_KEY","then","res","json","prevValues","results","filter","closeOverlay","hideSearchCarousel","fillSearchText","totalResults","length","className","overlay","active","children","closeButton","onClick","h1","initial","animate","variants","map","char","index","span","duration","resultsCount","scrollableContent","heading","style","paddingLeft","movieList","type"],"sources":["C:/Users/dasru/Documents/DVDStore_dev/frontend/src/shared/components/navigation/SearchOverlay.js"],"sourcesContent":["import { motion } from \"framer-motion\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { searchDetailsActions, searchOverlayActions } from \"../../../store\";\r\n\r\nimport Carousel from \"../../../home/components/Carousel\";\r\nimport classes from \"./SearchOverlay.module.css\";\r\n\r\nfunction SearchOverlay() {\r\n  const dispatch = useDispatch();\r\n  const showOverlay = useSelector(\r\n    (state) => state.searchOverlay.showSearchOverlay\r\n  );\r\n  const showSearchCarousel = useSelector(\r\n    (state) => state.searchDetails.showSearchDetails\r\n  );\r\n  const searchText = useSelector((state) => state.searchDetails.searchText);\r\n  const [searchResults, setSearchResults] = useState({\r\n    movieResults: [],\r\n    tvResults: [],\r\n  });\r\n\r\n  const searchOverlayText = splitStringUsingRegex(\"Please press Enter!\");\r\n  const charVariants = {\r\n    hidden: { opacity: 0, y: 10 }, // Add a slight translation for better visibility\r\n    reveal: { opacity: 1, y: 0 },\r\n  };\r\n  const containerVariants = {\r\n    hidden: {},\r\n    reveal: { transition: { delayChildren: 0, staggerChildren: 0.25 } },\r\n  };\r\n\r\n  function splitStringUsingRegex(inputstring) {\r\n    const characters = [];\r\n    const regex = /[\\s\\S]/gu;\r\n\r\n    let match;\r\n    while ((match = regex.exec(inputstring)) != null) {\r\n      characters.push(match[0]);\r\n    }\r\n\r\n    return characters;\r\n  }\r\n\r\n  function checkData(data) {\r\n    return (\r\n      data.poster_path !== null &&\r\n      data.poster_path !== undefined &&\r\n      data.poster_path !== \"\" &&\r\n      data.title !== null &&\r\n      data.title !== undefined &&\r\n      data.title !== \"\" &&\r\n      data.vote_average !== null &&\r\n      data.vote_average !== undefined &&\r\n      data.vote_average !== \"\" &&\r\n      data.overview !== null &&\r\n      data.overview !== undefined &&\r\n      data.overview !== \"\"\r\n    );\r\n  }\r\n\r\n  function checkDataTv(data) {\r\n    return (\r\n      data.poster_path !== null &&\r\n      data.poster_path !== undefined &&\r\n      data.poster_path !== \"\" &&\r\n      data.name !== null &&\r\n      data.name !== undefined &&\r\n      data.name !== \"\" &&\r\n      data.vote_average !== null &&\r\n      data.vote_average !== undefined &&\r\n      data.vote_average !== \"\" &&\r\n      data.overview !== null &&\r\n      data.overview !== undefined &&\r\n      data.overview !== \"\"\r\n    );\r\n  }\r\n\r\n  const getSearchResults = () => {\r\n    fetch(\r\n      `https://api.themoviedb.org/3/search/movie?language=en-US&api_key=${process.env.REACT_APP_API_KEY}&query=${searchText}&with_original_language=en`\r\n    )\r\n      .then((res) => res.json())\r\n      .then((json) =>\r\n        setSearchResults((prevValues) => ({\r\n          ...prevValues,\r\n          [\"movieResults\"]: json.results.filter(checkData),\r\n        }))\r\n      );\r\n\r\n    fetch(\r\n      `https://api.themoviedb.org/3/search/tv?language=en-US&api_key=${process.env.REACT_APP_API_KEY}&query=${searchText}&with_original_language=en`\r\n    )\r\n      .then((res) => res.json())\r\n      .then((json) =>\r\n        setSearchResults((prevValues) => ({\r\n          ...prevValues,\r\n          [\"tvResults\"]: json.results.filter(checkDataTv),\r\n        }))\r\n      );\r\n  };\r\n\r\n  useEffect(() => {\r\n    getSearchResults();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (\r\n      (searchText !== null || searchText !== undefined || searchText !== \"\") &&\r\n      !showSearchCarousel\r\n    ) {\r\n      getSearchResults();\r\n    }\r\n  }, [searchText, showSearchCarousel]);\r\n\r\n  const closeOverlay = () => {\r\n    dispatch(searchOverlayActions.showOverlay(false));\r\n    dispatch(searchDetailsActions.hideSearchCarousel()); // Hide carousel\r\n    dispatch(searchDetailsActions.fillSearchText(\"\")); // Clear input field\r\n  };\r\n\r\n  const totalResults =\r\n    searchResults.movieResults.length + searchResults.tvResults.length;\r\n\r\n  return (\r\n    <div className={`${classes.overlay} ${showOverlay ? classes.active : \"\"}`}>\r\n      <button className={classes.closeButton} onClick={closeOverlay}>\r\n        âœ•\r\n      </button>\r\n      {showSearchCarousel && (\r\n        <motion.h1\r\n          initial=\"hidden\"\r\n          animate=\"reveal\"\r\n          variants={containerVariants}\r\n          className={classes[\"overlay-text\"]}\r\n        >\r\n          {searchOverlayText.map((char, index) => (\r\n            <motion.span\r\n              key={`${char}-${index}`}\r\n              transition={{ duration: 1.5 }}\r\n              variants={charVariants}\r\n            >\r\n              {char}\r\n            </motion.span>\r\n          ))}\r\n        </motion.h1>\r\n      )}\r\n      {!showSearchCarousel && (\r\n        <>\r\n          <h2 className={classes.resultsCount}>\r\n            Search Results: Total {totalResults} results found\r\n          </h2>\r\n          <div className={classes.scrollableContent}>\r\n            {searchResults.movieResults.length > 0 && (\r\n              <>\r\n                <h2\r\n                  className={classes.heading}\r\n                  style={{ paddingLeft: \"12.5%\" }}\r\n                >\r\n                  Movies\r\n                </h2>\r\n                <Carousel\r\n                  movieList={searchResults.movieResults}\r\n                  type={\"movie\"}\r\n                />\r\n              </>\r\n            )}\r\n            {searchResults.tvResults.length > 0 && (\r\n              <>\r\n                <h2\r\n                  className={classes.heading}\r\n                  style={{ paddingLeft: \"12.5%\" }}\r\n                >\r\n                  Tv-Series\r\n                </h2>\r\n                <Carousel movieList={searchResults.tvResults} type={\"tv\"} />\r\n              </>\r\n            )}\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SearchOverlay;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}