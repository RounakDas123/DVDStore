"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[538],{2538:(e,s,a)=>{a.r(s),a.d(s,{default:()=>l});var r=a(5043),i=a(3003),d=a(2115),n=a(7752);const t={editcontainer:"EditProfile_editcontainer__S-NxQ",fieldContainer:"EditProfile_fieldContainer__QriCX"};var o=a(579);const l=()=>{const e=(0,i.wA)(),[s,a]=(0,r.useState)(JSON.parse(localStorage.getItem("userinfo"))),l={user_name:(null===s||void 0===s?void 0:s.name)||"",email_id:(null===s||void 0===s?void 0:s.email)||"",password:"",retype_password:""},m=s.id;(0,r.useEffect)((()=>{u({user_name:(null===s||void 0===s?void 0:s.name)||"",email_id:(null===s||void 0===s?void 0:s.email)||"",password:"",retype_password:""})}),[s]);const[p,u]=(0,r.useState)(l),[c,_]=(0,r.useState)(!1),[h,w]=(0,r.useState)(!1),[v,f]=(0,r.useState)(!1),b=e=>{const{name:s,value:a}=e.target;u({...p,[s]:a})};return(0,o.jsx)("div",{className:t.editcontainer,children:(0,o.jsxs)("form",{onSubmit:async s=>{s.preventDefault();const r={};if(c&&null!==p.user_name&&void 0!==p.user_name&&""!==p.user_name.trim()?r.user_name=p.user_name.trim():r.user_name=void 0,h&&null!==p.email_id&&void 0!==p.email_id&&""!==p.email_id.trim()?r.email_id=p.email_id.trim():r.email_id=void 0,v){if(null!==p.password&&void 0!==p.password&&""!==p.password.trim()?r.password=p.password.trim():r.password=void 0,null===p.retype_password||void 0===p.retype_password||""===p.retype_password.trim())return void d.oR.error("Please re-type new password!");if(p.retype_password!==p.password)return void d.oR.error("Passwords don't match. Please re-type!")}else r.password=void 0;try{const s=await fetch(`http://localhost:5000/api/users/updateprofile/${m}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_name:r.user_name,email_id:r.email_id,password:r.password})}),i=await s.json();if(!i.ok&&!i.user)return void d.oR.error(i.message);d.oR.success(i.message),e(n.zV.setUserInfo({user:i.user})),i.user&&localStorage.setItem("userinfo",JSON.stringify(i.user)),a(i.user),u({user_name:i.user.name||"",email_id:i.user.email||"",password:"",retype_password:""})}catch(i){console.log(i)}_(!1),w(!1),f(!1)},children:[(0,o.jsxs)("div",{className:t.fieldContainer,children:[(0,o.jsx)("input",{type:"checkbox",checked:c,onChange:e=>_(e.target.checked)}),(0,o.jsx)("label",{className:c?t.enabled:t.disabled,children:"User Name:"}),(0,o.jsx)("input",{type:"text",name:"user_name",value:p.user_name,disabled:!c,onChange:b})]}),(0,o.jsxs)("div",{className:t.fieldContainer,children:[(0,o.jsx)("input",{type:"checkbox",checked:h,onChange:e=>w(e.target.checked)}),(0,o.jsx)("label",{className:h?t.enabled:t.disabled,children:"Email ID:"}),(0,o.jsx)("input",{type:"email",name:"email_id",value:p.email_id,disabled:!h,onChange:b})]}),(0,o.jsxs)("div",{className:t.fieldContainer,children:[(0,o.jsx)("input",{type:"checkbox",checked:v,onChange:e=>f(e.target.checked)}),(0,o.jsx)("label",{className:v?t.enabled:t.disabled,children:"Password:"}),(0,o.jsx)("input",{type:"password",name:"password",value:p.password,disabled:!v,onChange:b})]}),(0,o.jsxs)("div",{className:t.fieldContainer,children:[(0,o.jsx)("label",{className:v?t.enabled:t.disabled,children:"Re-type Password:"}),(0,o.jsx)("input",{type:"password",name:"retype_password",value:p.retype_password,disabled:!v,onChange:b})]}),(0,o.jsx)("button",{type:"submit",children:"Submit"})]})})}}}]);
//# sourceMappingURL=538.3c604cff.chunk.js.map