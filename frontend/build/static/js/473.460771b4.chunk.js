"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[473],{5473:(e,s,i)=>{i.r(s),i.d(s,{default:()=>d});var o=i(5043),a=i(3003),t=i(1688),n=i(2115),l=i(7752);const r={"body-style":"Login_body-style__49xcy",container:"Login_container__z4HMl","container-root":"Login_container-root__zQaIq",cover:"Login_cover__Njwdt",flip:"Login_flip__sJgAC",back:"Login_back__7EEoW","form-content":"Login_form-content__l8Y+I","login-form":"Login_login-form__BhMEK","signup-form":"Login_signup-form__KhX0S",title:"Login_title__CHWQq","input-boxes":"Login_input-boxes__aYeLz","input-box":"Login_input-box__o1pzV",glow:"Login_glow__togpY",text:"Login_text__48eeo",button:"Login_button__F4E63","sign-up-text":"Login_sign-up-text__iki-i","login-text":"Login_login-text__DeIfJ","control-error":"Login_control-error__ZRnID"};var c=i(579);const d=()=>{(0,o.useEffect)((()=>{document.body.classList.add(`${r["body-style"]}`),document.getElementById("root").classList.add(`${r["container-root"]}`)}),[]);const e=(0,t.W6)(),s=(0,a.wA)(),[i,d]=(0,o.useState)({email:"",password:"",pwd_show:!0}),[p,u]=(0,o.useState)({name:"",email:"",password:"",confirm_password:"",pwd_show:!0,conf_pwd_show:!0}),[h,m]=(0,o.useState)(!1),[_,g]=(0,o.useState)({login:{email:!1},signup:{name:!1,email:!1}}),w=_.login.email&&!i.email.includes("@"),f=_.signup.name&&!p.name.match(/^[a-zA-Z]+$/),v=_.signup.email&&!p.email.includes("@");function x(e,s,i){"login"===e?d((e=>({...e,[s]:i}))):"signup"===e&&u((e=>({...e,[s]:i}))),g((i=>({...i,[e]:{...i[e],[s]:!1}})))}function j(e,s){g((i=>({...i,[e]:{...i[e],[s]:!0}})))}function y(e,s){"login"===e?d((e=>{var i=!e.pwd_show;return{...e,[s]:i}})):"signup"===e&&("pwd_show"===s?u((e=>{var i=!e.pwd_show;return{...e,[s]:i}})):"conf_pwd_show"===s&&u((e=>{var i=!e.conf_pwd_show;return{...e,[s]:i}})))}function S(e){"signup"===e?u({name:"",email:"",password:"",confirm_password:"",pwd_show:!0,conf_pwd_show:!0}):"login"===e&&d({email:"",password:"",pwd_show:!0})}return(0,c.jsxs)("div",{className:r.container,children:[(0,c.jsx)("input",{type:"checkbox",id:r.flip}),(0,c.jsx)("div",{className:r.cover,children:(0,c.jsx)("div",{className:r.front,children:(0,c.jsx)("img",{src:"logo.jpg",alt:""})})}),(0,c.jsx)("form",{name:"login",onSubmit:async function(o){o.preventDefault();var a=o.nativeEvent.submitter.name;if("login"===a){try{console.log("Environment Variables:",{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"d987bb3825166942aa314c4768160995",REACT_APP_BACKEND_URL:"http://localhost:5000/api"});const e=await fetch("http://localhost:5000/api/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email_id:i.email,password:i.password})}),o=await e.json();if(!o.ok&&!o.user)return void n.oR.error(o.message);n.oR.success(o.message),s(l.zV.setUserInfo({user:o.user,token:o.token})),o.token&&(localStorage.setItem("userinfo",JSON.stringify(o.user)),localStorage.setItem("token",o.token));const a=await fetch(`http://localhost:5000/api/wishlist/size/${o.user.id}`,{headers:{Authorization:"Bearer "+o.token}}),t=await a.json();if(!t.ok&&(null===t.wishlistSize||void 0===t.wishlistSize))return void n.oR.error(t.message);s(l.tV.setInitialValue({type:"wishlist",value:t.wishlistSize})),null!==t.wishlistSize&&void 0!==t.wishlistSize&&localStorage.setItem("wishlistSize",t.wishlistSize);const r=await fetch(`http://localhost:5000/api/cart/size/${o.user.id}`,{headers:{Authorization:"Bearer "+o.token}}),c=await r.json();if(!c.ok&&(null===c.cartSize||void 0===c.cartSize))return void n.oR.error(c.message);s(l.tV.setInitialValue({type:"cart",value:c.cartSize})),null!==c.cartSize&&void 0!==c.cartSize&&localStorage.setItem("cartSize",c.cartSize);const d=await fetch(`http://localhost:5000/api/wishlist/user/${o.user.id}`,{headers:{Authorization:"Bearer "+o.token}}),p=await d.json();if(!p.ok&&!p.wishlist)return void n.oR.error(p.message);s(l.fo.setInitialValue({type:"wishlist",value:p.wishlist.movie_tv})),null!==p.wishlist&&void 0!==p.wishlist&&null!==p.wishlist.movie_tv&&void 0!==p.wishlist.movie_tv&&localStorage.setItem("wishlist",JSON.stringify(p.wishlist.movie_tv));const u=await fetch(`http://localhost:5000/api/cart/user/${o.user.id}`,{headers:{Authorization:"Bearer "+o.token}}),h=await u.json();if(!h.ok&&!h.cart)return void n.oR.error(h.message);s(l.fo.setInitialValue({type:"cart",value:h.cart.movie_tv})),null!==h.cart&&void 0!==h.cart&&localStorage.setItem("cart",JSON.stringify(h.cart.movie_tv))}catch(c){console.log(c)}d({email:"",password:"",pwd_show:!0}),document.body.classList.remove(`${r["body-style"]}`),document.getElementById("root").classList.remove(`${r["container-root"]}`),e.push("/home")}else if("signup"===a){if(p.password!==p.confirm_password)return void m(!0);try{const e=await fetch("http://localhost:5000/api/users/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_name:p.name,email_id:p.email,password:p.password})}),s=await e.json();if(!s.ok&&!s.user)return void n.oR.error(s.message);n.oR.success(s.message)}catch(c){console.log(c)}u({name:"",email:"",password:"",confirm_password:"",pwd_show:!0,conf_pwd_show:!0});const e=document.getElementById(r.flip);if(e){var t=e.checked;e.checked=!t}}g({login:{email:!1},signup:{name:!1,email:!1}})},children:(0,c.jsxs)("div",{className:r["form-content"],children:[(0,c.jsxs)("div",{className:r["login-form"],children:[(0,c.jsx)("div",{className:r.title,children:"Login"}),(0,c.jsxs)("div",{className:r["input-boxes"],children:[(0,c.jsxs)("div",{className:r["input-box"],children:[(0,c.jsx)("i",{className:"fas fa-envelope"}),(0,c.jsx)("input",{type:"text",placeholder:"Enter you email",onBlur:()=>{j("login","email")},onChange:e=>{x("login","email",e.target.value)},value:i.email})]}),w&&(0,c.jsx)("div",{className:r["control-error"],children:(0,c.jsx)("p",{children:"Please enter valid email address"})}),(0,c.jsxs)("div",{className:r["input-box"],children:[(0,c.jsx)("i",{className:"fas fa-lock"}),(0,c.jsx)("input",{type:i.pwd_show?"password":"text",placeholder:"Enter you password",onChange:e=>{x("login","password",e.target.value)},value:i.password}),(0,c.jsx)("a",{href:"#",onClick:()=>{y("login","pwd_show")},children:(0,c.jsx)("span",{className:i.pwd_show?"fas fa-eye":"fas fa-eye-slash"})})]}),(0,c.jsx)("div",{className:`${r.button} ${r["input-box"]}`,children:(0,c.jsx)("input",{type:"submit",name:"login",value:"Login"})}),(0,c.jsxs)("div",{className:`${r.text} ${r["login-text"]}`,children:["Don't have an account?"," ",(0,c.jsx)("label",{htmlFor:r.flip,onClick:()=>{S("signup")},children:"Signup now"})]})]})]}),(0,c.jsxs)("div",{className:r["signup-form"],children:[(0,c.jsx)("div",{className:r.title,children:"Signup"}),(0,c.jsxs)("div",{className:r["input-boxes"],children:[(0,c.jsxs)("div",{className:r["input-box"],children:[(0,c.jsx)("i",{className:"fas fa-user"}),(0,c.jsx)("input",{type:"text",placeholder:"Enter you name",onBlur:()=>{j("signup","name")},onChange:e=>{x("signup","name",e.target.value)},value:p.name})]}),f&&(0,c.jsx)("div",{className:r["control-error"],children:(0,c.jsx)("p",{children:"Please enter valid name(text only)"})}),(0,c.jsxs)("div",{className:r["input-box"],children:[(0,c.jsx)("i",{className:"fas fa-envelope"}),(0,c.jsx)("input",{type:"text",placeholder:"Enter you email",onBlur:()=>{j("signup","email")},onChange:e=>{x("signup","email",e.target.value)},value:p.email})]}),v&&(0,c.jsx)("div",{className:r["control-error"],children:(0,c.jsx)("p",{children:"Please enter valid email address"})}),(0,c.jsxs)("div",{className:r["input-box"],children:[(0,c.jsx)("i",{className:"fas fa-lock"}),(0,c.jsx)("input",{type:p.pwd_show?"password":"text",placeholder:"Enter you password",onChange:e=>{x("signup","password",e.target.value)},value:p.password}),(0,c.jsx)("a",{href:"#",onClick:()=>{y("signup","pwd_show")},children:(0,c.jsx)("span",{className:p.pwd_show?"fas fa-eye":"fas fa-eye-slash"})})]}),(0,c.jsxs)("div",{className:r["input-box"],children:[(0,c.jsx)("i",{className:"fa fa-lock"}),(0,c.jsx)("input",{type:p.conf_pwd_show?"password":"text",placeholder:"Re-enter you password",onChange:e=>{x("signup","confirm_password",e.target.value)},value:p.confirm_password}),(0,c.jsx)("a",{href:"#",onClick:()=>{y("signup","conf_pwd_show")},children:(0,c.jsx)("span",{className:p.conf_pwd_show?"fas fa-eye":"fas fa-eye-slash"})})]}),h&&(0,c.jsx)("div",{className:r["control-error"],children:(0,c.jsx)("p",{children:"Passwords must match"})}),(0,c.jsx)("div",{className:`${r.button} ${r["input-box"]}`,children:(0,c.jsx)("input",{type:"submit",name:"signup",value:"Signup"})}),(0,c.jsxs)("div",{className:`${r.text} ${r["sign-up-text"]}`,children:["Already have an account?"," ",(0,c.jsx)("label",{htmlFor:r.flip,onClick:()=>{S("login")},children:"Login now"})]})]})]})]})})]})}}}]);
//# sourceMappingURL=473.460771b4.chunk.js.map