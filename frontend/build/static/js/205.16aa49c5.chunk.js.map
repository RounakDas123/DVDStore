{"version":3,"file":"static/js/205.16aa49c5.chunk.js","mappings":"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","sources":["webpack://frontend/./src/wishlist/components/ConfirmationModal.module.css?ec36","wishlist/components/ConfirmationModal.js","webpack://frontend/./src/wishlist/pages/Wishlist.module.css?075c","wishlist/pages/Wishlist.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"ConfirmationModal_modal__IxBnh\",\"slide-in-from-top\":\"ConfirmationModal_slide-in-from-top__kwshg\",\"buttonGroup\":\"ConfirmationModal_buttonGroup__+IrAP\",\"yesButton\":\"ConfirmationModal_yesButton__iFk0R\",\"noButton\":\"ConfirmationModal_noButton__Q2L40\"};","import React, { forwardRef, useImperativeHandle, useRef } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { cardbuttonsActions, wishlistCartActions } from \"../../store/index\";\r\nimport classes from \"./ConfirmationModal.module.css\";\r\n\r\nconst ConfirmationModal = forwardRef(\r\n  ({ item, userId, token, onWishlistUpdate, actionType }, ref) => {\r\n    const dialog = useRef();\r\n    const dispatch = useDispatch();\r\n    useImperativeHandle(ref, () => ({\r\n      open() {\r\n        if (dialog.current) dialog.current.showModal();\r\n      },\r\n      close() {\r\n        if (dialog.current) dialog.current.close();\r\n      },\r\n    }));\r\n\r\n    const closeModal = () => {\r\n      if (dialog.current) dialog.current.close();\r\n    };\r\n\r\n    const handleYes = async () => {\r\n      try {\r\n        if (actionType === \"cart\") {\r\n          const responseAdd = await fetch(\r\n            `${process.env.REACT_APP_BACKEND_URL}/cart/add/${userId}`,\r\n            {\r\n              method: \"POST\",\r\n              headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                Authorization: `Bearer ${token}`,\r\n              },\r\n              body: JSON.stringify({\r\n                id: item.id,\r\n                type: item.type,\r\n                title: item.title,\r\n                price: item.price,\r\n                quantity: 1,\r\n              }),\r\n            }\r\n          );\r\n          const responseDataAdd = await responseAdd.json();\r\n          if (!responseDataAdd.ok && !responseDataAdd.cart) {\r\n            toast.error(responseDataAdd.message);\r\n            return;\r\n          }\r\n          toast.success(responseDataAdd.message);\r\n\r\n          // Remove from Wishlist API call\r\n          const responseRemove = await fetch(\r\n            `${process.env.REACT_APP_BACKEND_URL}/wishlist/delete/${userId}/${item.id}`,\r\n            {\r\n              method: \"DELETE\",\r\n              headers: {\r\n                Authorization: `Bearer ${token}`,\r\n              },\r\n            }\r\n          );\r\n          const responseDataRemove = await responseRemove.json();\r\n          if (!responseDataRemove.ok && !responseDataRemove.removedItem) {\r\n            toast.error(responseDataRemove.message);\r\n            return;\r\n          }\r\n          toast.success(responseDataRemove.message);\r\n\r\n          let size = 0;\r\n          size = responseDataAdd.cart.movie_tv.reduce(\r\n            (sum, item) => sum + item.quantity,\r\n            0\r\n          );\r\n\r\n          localStorage.setItem(\"cartSize\", size);\r\n          dispatch(\r\n            cardbuttonsActions.setInitialValue({ type: \"cart\", value: size })\r\n          );\r\n\r\n          localStorage.setItem(\r\n            \"cart\",\r\n            JSON.stringify(responseDataAdd.cart.movie_tv)\r\n          );\r\n          dispatch(\r\n            wishlistCartActions.setInitialValue({\r\n              type: \"cart\",\r\n              value: responseDataAdd.cart.movie_tv,\r\n            })\r\n          );\r\n\r\n          localStorage.setItem(\r\n            \"wishlistSize\",\r\n            responseDataRemove.wishlist.movie_tv.length\r\n          );\r\n          dispatch(\r\n            cardbuttonsActions.setInitialValue({\r\n              type: \"wishlist\",\r\n              value: responseDataRemove.wishlist.movie_tv.length,\r\n            })\r\n          );\r\n\r\n          localStorage.setItem(\r\n            \"wishlist\",\r\n            JSON.stringify(responseDataRemove.wishlist.movie_tv)\r\n          );\r\n          dispatch(\r\n            wishlistCartActions.setInitialValue({\r\n              type: \"wishlist\",\r\n              value: responseDataRemove.wishlist.movie_tv,\r\n            })\r\n          );\r\n        } else if (actionType === \"delete\") {\r\n          const response_remove = await fetch(\r\n            `${process.env.REACT_APP_BACKEND_URL}/wishlist/delete/${userId}/${item.id}`,\r\n            {\r\n              method: \"DELETE\",\r\n              headers: {\r\n                Authorization: \"Bearer \" + token,\r\n              },\r\n            }\r\n          );\r\n          const responseData_remove = await response_remove.json();\r\n          if (!responseData_remove.ok && !responseData_remove.removedItem) {\r\n            toast.error(responseData_remove.message);\r\n            return;\r\n          }\r\n          toast.success(responseData_remove.message);\r\n\r\n          localStorage.setItem(\r\n            \"wishlistSize\",\r\n            responseData_remove.wishlist.movie_tv.length\r\n          );\r\n          dispatch(\r\n            cardbuttonsActions.setInitialValue({\r\n              type: \"wishlist\",\r\n              value: responseData_remove.wishlist.movie_tv.length,\r\n            })\r\n          );\r\n\r\n          localStorage.setItem(\r\n            \"wishlist\",\r\n            JSON.stringify(responseData_remove.wishlist.movie_tv)\r\n          );\r\n          dispatch(\r\n            wishlistCartActions.setInitialValue({\r\n              type: \"wishlist\",\r\n              value: responseData_remove.wishlist.movie_tv,\r\n            })\r\n          );\r\n        }\r\n\r\n        onWishlistUpdate();\r\n        closeModal();\r\n      } catch (err) {\r\n        console.error(err);\r\n        toast.error(\"An error occurred. Please try again.\");\r\n      }\r\n    };\r\n    const modalMessage =\r\n      actionType === \"cart\"\r\n        ? \"If you add to Cart, it will be removed from Wishlist. Do you wish to proceed?\"\r\n        : \"Do you wish to delete from Wishlist?\";\r\n\r\n    return createPortal(\r\n      <dialog ref={dialog} className={classes.modal}>\r\n        <h2>Confirmation</h2>\r\n        <p>{modalMessage}</p>\r\n        <div className={classes.buttonGroup}>\r\n          <button className={classes.yesButton} onClick={handleYes}>\r\n            Yes\r\n          </button>\r\n          <button className={classes.noButton} onClick={closeModal}>\r\n            No\r\n          </button>\r\n        </div>\r\n      </dialog>,\r\n      document.getElementById(\"modal\")\r\n    );\r\n  }\r\n);\r\n\r\nexport default ConfirmationModal;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"wishlist\":\"Wishlist_wishlist__WLOVE\",\"wishlistItem\":\"Wishlist_wishlistItem__fzvlZ\",\"type\":\"Wishlist_type__uhz7I\",\"title\":\"Wishlist_title__mRJ3E\",\"price\":\"Wishlist_price__TIEhg\",\"actions\":\"Wishlist_actions__VyibM\",\"icon\":\"Wishlist_icon__4cB7K\",\"emptyMessage\":\"Wishlist_emptyMessage__hqYJV\",\"wishlistContainer\":\"Wishlist_wishlistContainer__GqrN4\",\"header\":\"Wishlist_header__QYFaJ\",\"refreshButton\":\"Wishlist_refreshButton__DPGS2\"};","import { motion } from \"framer-motion\";\r\nimport React, { useRef, useState } from \"react\";\r\nimport { IoMdCart } from \"react-icons/io\";\r\nimport { LuRefreshCw } from \"react-icons/lu\";\r\nimport { MdDeleteForever } from \"react-icons/md\";\r\nimport { TbCurrencyRupee } from \"react-icons/tb\";\r\n\r\nimport ConfirmationModal from \"../components/ConfirmationModal\";\r\nimport classes from \"./Wishlist.module.css\";\r\n\r\nconst Wishlist = () => {\r\n  const userId = Number(JSON.parse(localStorage.getItem(\"userinfo\")).id);\r\n  const token = localStorage.getItem(\"token\");\r\n\r\n  const [selectedItem, setSelectedItem] = useState(null); // To store the clicked item for modal\r\n  const [actionType, setActionType] = useState(\"\"); // To determine the modal context\r\n  const [wishlist, setWishlist] = useState(\r\n    JSON.parse(localStorage.getItem(\"wishlist\")) || []\r\n  );\r\n  const modalRef = useRef();\r\n\r\n  const handleCartClick = (item) => {\r\n    setSelectedItem(item); // Set the selected item for modal\r\n    setActionType(\"cart\");\r\n    if (modalRef.current) modalRef.current.open(); // Open the modal\r\n  };\r\n\r\n  const handleDeleteClick = (item) => {\r\n    setSelectedItem(item); // Set the selected item for modal\r\n    setActionType(\"delete\");\r\n    if (modalRef.current) modalRef.current.open(); // Open the modal\r\n  };\r\n\r\n  const handleWishlistUpdate = () => {\r\n    const updatedWishlist = JSON.parse(localStorage.getItem(\"wishlist\")) || [];\r\n    setWishlist(updatedWishlist);\r\n  };\r\n\r\n  const itemVariants = {\r\n    hidden: { opacity: 0, x: 50 }, // Start with opacity 0 and move from the right\r\n    visible: (i) => ({\r\n      opacity: 1,\r\n      x: 0,\r\n      transition: { delay: i * 0.2, type: \"spring\", stiffness: 100 },\r\n    }),\r\n  };\r\n\r\n  return (\r\n    <div className={classes.wishlistContainer}>\r\n      <div className={classes.header}>\r\n        <button\r\n          className={classes.refreshButton}\r\n          onClick={handleWishlistUpdate}\r\n        >\r\n          <LuRefreshCw /> Refresh\r\n        </button>\r\n      </div>\r\n      {wishlist.length === 0 ? (\r\n        <div className={classes.emptyMessage}>\r\n          Wishlist is empty! Please add something!\r\n        </div>\r\n      ) : (\r\n        <div className={classes.wishlist}>\r\n          {wishlist.map((item, index) => (\r\n            <motion.div\r\n              className={classes.wishlistItem}\r\n              key={item.id}\r\n              custom={index} // Pass the index for staggered animation\r\n              initial=\"hidden\"\r\n              animate=\"visible\"\r\n              variants={itemVariants}\r\n            >\r\n              <div className={classes.type}>{item.type.toUpperCase()}</div>\r\n              <div className={classes.title}>{item.title}</div>\r\n              <div className={classes.price}>\r\n                <TbCurrencyRupee />\r\n                {item.price}\r\n              </div>\r\n              <div className={classes.actions}>\r\n                <IoMdCart\r\n                  className={classes.icon}\r\n                  onClick={() => handleCartClick(item)}\r\n                />\r\n                <MdDeleteForever\r\n                  className={classes.icon}\r\n                  onClick={() => handleDeleteClick(item)}\r\n                />\r\n              </div>\r\n            </motion.div>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      <ConfirmationModal\r\n        ref={modalRef}\r\n        item={selectedItem}\r\n        userId={userId}\r\n        token={token}\r\n        onWishlistUpdate={handleWishlistUpdate}\r\n        actionType={actionType}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Wishlist;\r\n"],"names":["forwardRef","_ref","ref","item","userId","token","onWishlistUpdate","actionType","dialog","useRef","dispatch","useDispatch","useImperativeHandle","open","current","showModal","close","closeModal","modalMessage","createPortal","_jsxs","className","classes","children","_jsx","onClick","async","responseAdd","fetch","method","headers","Authorization","body","JSON","stringify","id","type","title","price","quantity","responseDataAdd","json","ok","cart","toast","error","message","success","responseRemove","responseDataRemove","removedItem","size","movie_tv","reduce","sum","localStorage","setItem","cardbuttonsActions","setInitialValue","value","wishlistCartActions","wishlist","length","response_remove","responseData_remove","err","console","document","getElementById","Wishlist","Number","parse","getItem","selectedItem","setSelectedItem","useState","setActionType","setWishlist","modalRef","handleWishlistUpdate","updatedWishlist","itemVariants","hidden","opacity","x","visible","i","transition","delay","stiffness","LuRefreshCw","map","index","motion","div","custom","initial","animate","variants","toUpperCase","TbCurrencyRupee","IoMdCart","handleCartClick","MdDeleteForever","handleDeleteClick","ConfirmationModal"],"sourceRoot":""}